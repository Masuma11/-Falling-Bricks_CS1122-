import pygame, random, sys
from pygame.locals import *

WINDOWWIDTH = 600
WINDOWHEIGHT = 600
TEXTCOLOR = (0 , 0, 0)
BACKGROUNDCOLOR = (255, 255, 255)
FPS = 40
BADDIEMINSIZE = 10
BADDIEMAXSIZE = 40
BADDIEMINSPEED = 1
BADDIEMAXSPEED = 7
ADDNEWBADDIERATE = 10
PLAYERMOVERATE = 5
BULLETSPEED = 10
FIRINGRATE = 2










# Add new baddies at the top of the screen, if needed.
        baddieAddCounter += 1
        timeCounter += 1  
        if baddieAddCounter >= ADDNEWBADDIERATE:
            baddieAddCounter = 0
            baddieSize = random.randint(BADDIEMINSIZE, BADDIEMAXSIZE)
            newBaddie = {'rect': pygame.Rect(random.randint(0, WINDOWWIDTH-baddieSize), 0 - baddieSize, baddieSize, baddieSize),
                        'speed': random.randint(BADDIEMINSPEED, BADDIEMAXSPEED),
                        'surface': pygame.transform.scale(baddieImage, (baddieSize, baddieSize)),
                        }

            baddies.append(newBaddie)
            
        # Increase baddie speed and spawn rate every 5 seconds.
        if timeCounter == FPS * 5:
            timeCounter = 0
            BADDIEMINSPEED += 1
            BADDIEMAXSPEED += 1
            if ADDNEWBADDIERATE > 3:
                ADDNEWBADDIERATE -= 1
        
        # Move the player around.
        if moveLeft and playerRect.left > 0:
            playerRect.move_ip(-1 * PLAYERMOVERATE, 0)
        if moveRight and playerRect.right < WINDOWWIDTH:
            playerRect.move_ip(PLAYERMOVERATE, 0)
        if moveUp and playerRect.top > 0:
            playerRect.move_ip(0, -1 * PLAYERMOVERATE)
        if moveDown and playerRect.bottom < WINDOWHEIGHT:
            playerRect.move_ip(0, PLAYERMOVERATE)

        # not yet, in progress
        bulletCounter += 1
        if bulletCounter == FIRINGRATE:
            bulletCounter = 0
            newBullet = {'rect': pygame.Rect(playerRect.left + 2, playerRect.top, 4, 4),
                         'speed': BULLETSPEED,
                         'surface': pygame.transform.scale(bulletImage, (4, 4)),
                        }
            bullets.append(newBullet)
        
        # Move the baddies down.
        for b in baddies:
            b['rect'].move_ip(0, b['speed'])

        # Fire bullets.
        for bullet in bullets:
            bullet['rect'].move_ip(0, -bullet['speed'])

        # Delete baddies that have fallen past the bottom.
        for b in baddies[:]:
            if b['rect'].top > WINDOWHEIGHT:
                baddies.remove(b)
